---
import BaseLayout from "../../layouts/BaseLayout.astro";
import CardSection from "../../components/CardSection.astro";
import Card from "../../components/Card.astro";
import Blogroll from "../../components/Blogroll.astro";

let posts = await Astro.glob("./*.md");
posts = posts
  .filter((post) => !post.frontmatter.title.includes("DRAFT"))
  .sort((a, b) => {
    return (
      +new Date(b.frontmatter.publishDate) -
      +new Date(a.frontmatter.publishDate)
    );
  });
---

<BaseLayout title="Blog" description="Jonathan Bell's thoughts and feelings">
  <CardSection sectionTitle="Blog">
    {
      posts.map((post) => (
        <Card
          heading={post.frontmatter.title}
          body={post.frontmatter.description}
          pub-date={post.frontmatter.publishDate}
          link={post.url || ""}
          emoji={post.frontmatter.emoji}
        />
      ))
    }
  </CardSection>
  <Blogroll />
</BaseLayout>
